<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Buena Vida - Vitrina</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="/estilos/global.css"/>
</head>
<body>
  <!-- IU-09: Barra de navegación superior -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light px-3">
    <a class="navbar-brand" href="#">
      <img src="assets/logo.jpg" alt="Buena Vida" style="height: 50px;">
    </a>
    <div class="ms-auto d-flex align-items-center gap-3">
      <a href="favoritos.html" class="btn btn-outline-danger" title="Favoritos">❤️</a>
      <a href="cuenta.html" class="btn btn-outline-secondary" title="Mi Cuenta">👤</a>
      <button id="btn-carrito" class="btn btn-outline-success position-relative" title="Mi carrito">
        🛒
        <span id="contador-carrito" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
      </button>
    </div>
  </nav>

  <!-- Zona principal -->
  <main class="container my-4">
    <!-- Buscador y filtros -->
    <div class="row mb-4 g-2">
      <div class="col-md-4">
        <input type="text" id="buscador" class="form-control" placeholder="Buscar productos..." />
      </div>
      <div class="col-md-3">
        <input type="number" id="precio-min" class="form-control" placeholder="Precio mínimo">
      </div>
      <div class="col-md-3">
        <input type="number" id="precio-max" class="form-control" placeholder="Precio máximo">
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary w-100" id="btn-buscar">Buscar</button>
      </div>
    </div>

    <!-- Zona de productos -->
    <div id="contenedor-productos" class="row g-4">
      <!-- JS renderiza aquí -->
    </div>

    <!-- Paginación -->
    <nav class="mt-4" id="paginacion">
      <!-- renderPaginacion() inyecta el <ul class="pagination"> -->
    </nav>
  </main>

  <!-- IU-10: Resumen flotante de carrito -->
  <div id="resumen-carrito" class="position-fixed bottom-0 end-0 bg-white border p-3 shadow d-none" style="max-width: 320px; z-index: 1050;">
    <h5>🛒 Tu carrito</h5>
    <div id="carrito-items" class="mb-2">
      <p class="text-muted small">Tu carrito está vacío.</p>
    </div>
    <hr>
    <button onclick="window.location.href='carrito.html'" class="btn btn-primary w-100 mb-2">Ir al carrito</button>
    <button class="btn btn-success w-100">Realizar pedido</button>
  </div>

  <!-- Scripts Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Scripts principales en orden de dependencia -->
  <script type="module" src="build/favoritos/modelo.js"></script>
  <script type="module" src="build/carrito/modelo.js"></script>
  <script type="module" src="build/modal/controlador.js"></script>
  <script type="module" src="build/vitrina/controlador.js"></script>

  <!-- IU-10: Script resumen flotante -->
  <script>
    const resumenCarrito = document.getElementById("resumen-carrito");
    const btnCarrito = document.getElementById("btn-carrito");

    btnCarrito.addEventListener("click", () => {
      resumenCarrito.classList.toggle("d-none");
    });

    const contador = document.getElementById("contador-carrito");
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    contador.textContent = carrito.length;
  </script>
</body>
</html>
